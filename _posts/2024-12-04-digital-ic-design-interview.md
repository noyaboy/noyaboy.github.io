---
title: "Digital IC Design Interview"
date: 2024-12-04
permalink: /blog/digital-ic-design-interview/
tags:
  - Interview
  - Digital IC Design
---

A comprehensive study guide for digital IC design interviews, covering integrated circuit design knowledge, timing analysis, and practical interview preparation across multiple semiconductor companies.

## ICD Knowledge

### Latch and Flip-flop Fundamentals

Basic sequential logic elements including latch and flip-flop structures.

### Metastability

Metastability occurs when flip-flop output stabilization exceeds clock-to-Q timing. Solutions include double flip-flop synchronizers to transfer signals across clock domains safely.

### Clock Domain Crossing (CDC)

#### Single Bit Signal
- Double flip-flop synchronizers handle single-bit transfers
- Pulse synchronizers use XOR gates to convert pulse signals to level signals, pass through flip-flops, then convert back
- Pulse synchronizers require adequate spacing between consecutive pulses to meet destination domain edge requirements

#### Multi-Bit Signal
Three solutions address multi-bit CDC challenges:
1. Load signal generation via pulse synchronizer
2. Extra flip-flop stages with comparison logic
3. Asynchronous FIFO implementation

### Asynchronous FIFO

Uses Gray code representation for read/write pointers. Only one bit changes per clock edge, enabling safe 2F/F synchronizer application.

**Gray Code Characteristics:**
- Adjacent Gray codes differ by exactly one bit
- Binary-to-Gray transitions follow symmetric patterns around power-of-2 boundaries
- For non-power-of-2 depths, adjust starting points to maintain single-bit transitions

### MUX and Full Adder

**Full Adder Truth Table and Logic:**
- Sum = a ⊕ b ⊕ Cin
- Cout = ab + aCin + bCin

## Synthesis Concepts

### Technology Libraries
- fast.db
- slow.db
- typical.db

### Undefined Interconnect
Addressed through wire load models during synthesis.

### Clock Gating

Clock signal arrives only when data is to be switched - reduces dynamic power. AND gate implementations risk glitches; glitch prevention using Enable generated by latch with negative clk prevents metastability issues.

## STA (Static Timing Analysis)

### DTA vs. STA Comparison

**DTA (Testbench Simulation) Limitations:**
- Exhaustive analysis impossible
- Failure cause identification difficult
- Resource-intensive

**STA Constraints:**
- Synchronous design only
- Complex special cases (false paths, multicycle paths, multiple clocks)

### Timing Path Types
- Register (clk) → Register (D)
- Register (clk) → OUTPUT
- INPUT → Register (D)
- INPUT (clk) → OUTPUT

### STA Methods
- **Path-based:** Considers actual per-path delays (complex)
- **Block-based:** Evaluates best/worst case per node (conservative)

### Setup and Hold Checks

**Setup (Max Delay):**
- AT = T₀ + T_clk,latency + T_cq + T_pd
- RT = T₀ + T_clk,latency - T_skew + T_cycle - T_setup
- Slack = RT - AT

**Hold (Min Delay):**
- AT = T₀ + T_clk,latency + T_cq + T_pd
- RT = T₀ + T_clk,latency + T_skew + T_hold
- Slack = AT - RT

### Special Timing Paths

**False Paths (ignored by STA):**
1. Unexercised paths (debugging probes)
2. Irrelevant paths (slow, non-critical)
3. Asynchronous paths (CDC transfers)
4. Logically impossible paths
5. Combinational loops

**Multicycle Paths:** Require more than one cycle for data propagation.

## Frequency Dividers

### Divide-by-2 Circuit (Without Counter)

```verilog
module div2 (
  input clk,
  input rst_n,
  output reg o_clk
);
always@(posedge clk or negedge rst_n) begin
  if (!rst_n)
    o_clk <= 1'b0;
  else
    o_clk <= ~o_clk;
end
endmodule
```

### Divide-by-2 Circuit (With Counter)

```verilog
module div2 (
  input clk,
  input rst_n,
  output reg o_clk
);
reg cnt;
always@(posedge clk or negedge rst_n) begin
  if (!rst_n) begin
    o_clk <= 1'b0;
    cnt <= 1'b0;
  end
  else begin
    o_clk <= (cnt < 1) ? 1'b0 : 1'b1;
    cnt <= cnt + 1'b1;
  end
end
endmodule
```

### Divide-by-N Circuit

```verilog
module divn (
  input clk,
  input rst_n,
  output o_clk
);
parameter WIDTH = 3;
parameter N = 6;

reg [WIDTH-1:0] cnt_p;
reg [WIDTH-1:0] cnt_n;
reg clk_p;
reg clk_n;

assign o_clk = (N == 1) ? clk :
               (N[0]) ? (clk_p | clk_n) : (clk_p);

always@(posedge clk or negedge rst_n) begin
  if (!rst_n) cnt_p <= 0;
  else cnt_p <= (cnt_p == (N-1)) ? 0 : cnt_p + 1;
end

always@(posedge clk or negedge rst_n) begin
  if (!rst_n) clk_p <= 1;
  else clk_p = (cnt_p < (N>>1));
end

always@(negedge clk or negedge rst_n) begin
  if (!rst_n) cnt_n <= 0;
  else cnt_n <= (cnt_n == (N-1)) ? 0 : cnt_n + 1;
end

always@(negedge clk or negedge rst_n) begin
  if (!rst_n) clk_n <= 1;
  else clk_n = (cnt_n < (N>>1));
end
endmodule
```

## Interview Topics by Company

### MediaTek (MTK)
**Departments:** CAI, SPD1, SPD3, ADCT

**Topics:** Setup/hold calculations, multi-bit CDC, false/multicycle paths, input/output delays, synchronous/asynchronous differences, Gray code, RTL from waveforms, IC design flow, SystemVerilog, adder/multiplier design with MUX, async FIFO, NAND-based gates, divide-by-3 circuits, pre/post simulation differences, synthesis file requirements, divide-by-1.5 circuits, cache optimization, clock gating

### Realtek (RTK)
**Departments:** CN, RDC, MM

**Topics:** Blocking/non-blocking assignments, frequency dividers, critical path analysis, DFF from latches, low-power design, counter reversal, clock skew effects, timing violation solutions, latch generation conditions, NAND design from MUX, clock timing decisions, zero hold time feasibility, pipelined architectures, multicycle parameter settings, PVT violations

### Novatek (NTK)
**Departments:** TCON, iHome

**Topics:** Divide-by-2 without counters, RTL-to-schematic conversion, metastability explanation, input/output delay usage, pipeline implementation, fault coverage, delay constraints, async reset issues, NAND/NOR gate combinations, negative setup/hold values, hold time independence, full adder design, base conversion

### Phison
**Departments:** SSD, EMMC

**Topics:** Setup/hold inequalities, clock gating, IC design flow, synchronous/asynchronous design, frequency dividers, CMOS gate design, multi-bit CDC, metastability, XOR truth tables, multicycle/false paths, XOR design from MUX, timing requirements, clock skew avoidance, cell library characteristics, SystemVerilog applications

### Silicon Motion (SMI)
**Departments:** UFS, SSD

**Topics:** CDC, FSM design, MUX from logic gates, low-power techniques, timing violation solutions, IC design flow, SDF file content, latch/DFF differences, glitch generation, AND gate design from NOR, input/output delays, timing report interpretation, CDC solutions, clock/data path diagrams, MUX area optimization, XOR from inverters/MUX, divide-by-3, edge/level triggering

### GUC (Huawei)
**Departments:** APR, DFT

**Topics:** APR flow, power ring design, CTS functionality, IR drop, scan chains, test/fault coverage, scan reordering, lockup latches, BIST, stuck-at faults, transition delay faults, crosstalk, electromigration, SDFF design, boundary scan, DFT necessity, DRC/LVS, ATPG, APR/RTL verification, APR commands, advanced process challenges, LEF/DB file content, wire load models
